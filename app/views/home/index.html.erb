<div class="three-pane-layout"
     data-controller="keyboard mobile-pane"
     data-mobile-pane="feeds">
  <!-- Left pane: Feed list -->
  <aside class="feed-list-pane">
    <div class="pane-header">
      <h1>Tsubame</h1>
      <div class="pane-header-links">
        <%= link_to pinned_entries_path, data: { turbo_frame: "entry_list" }, class: "pin-list-link" do %>
          📌 ピン一覧
          <span id="pin_badge">
            <% if @pinned_count > 0 %>
              <span class="pin-badge"><%= @pinned_count %></span>
            <% end %>
          </span>
        <% end %>
        <%= link_to "フィード管理", feeds_path, class: "feed-manage-link" %>
      </div>
    </div>

    <div class="feed-list" data-keyboard-target="feedList">
      <% if @feeds.any? %>
        <% @feeds.each do |feed| %>
          <%= link_to feed_entries_path(feed), data: { turbo_frame: "entry_list", feed_id: feed.id }, class: "feed-item", tabindex: "-1" do %>
            <span class="feed-title"><%= feed.title || feed.url %></span>
            <% if feed.unread_count.to_i > 0 %>
              <span class="unread-badge"><%= feed.unread_count %></span>
            <% end %>
          <% end %>
        <% end %>
      <% else %>
        <p class="empty-message">フィードがありません。<%= link_to "OPMLをインポート", import_feeds_path %>してください。</p>
      <% end %>
    </div>
  </aside>

  <!-- Right pane: Entry list and detail -->
  <div class="content-pane">
    <!-- Top: Entry list -->
    <section class="entry-list-pane" data-keyboard-target="entryList">
      <%= turbo_frame_tag "entry_list" do %>
        <div class="empty-message">
          <p>左からフィードを選択してください</p>
        </div>
      <% end %>
    </section>

    <!-- Bottom: Entry detail -->
    <section class="entry-detail-pane" data-keyboard-target="entryDetail">
      <%= turbo_frame_tag "entry_detail" do %>
        <div class="empty-message">
          <p>エントリを選択してください</p>
        </div>
      <% end %>
    </section>
  </div>
</div>
